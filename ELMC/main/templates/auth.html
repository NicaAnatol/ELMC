{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Login - Register</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'><path fill='white' d='M239.1 6.3l-208 78c-18.7 7-31.1 25-31.1 45v225.1c0 18.2 10.3 34.8 26.5 42.9l208 104c13.5 6.8 29.4 6.8 42.9 0l208-104c16.3-8.1 26.5-24.8 26.5-42.9V129.3c0-20-12.4-37.9-31.1-44.9l-208-78C262 2.2 250 2.2 239.1 6.3zM256 68.4l192 72v1.1l-192 78-192-78v-1.1l192-72zm32 356V275.5l160-65v133.9l-160 80z'/></svg>" type="image/svg+xml">
        <link rel="manifest" href="{% static 'pwa/manifest.json' %}">
<meta name="theme-color" content="#667eea">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="ELMC 3D">
<link rel="apple-touch-icon" href="{% static 'pwa/icon-192x192.png' %}">
    <link rel="alternate icon" href="https://img.icons8.com/ios-filled/50/667eea/cube.png" type="image/png">
    <link rel="shortcut icon" href="https://img.icons8.com/ios-filled/50/667eea/cube.png">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
      <link rel="stylesheet" href="{% static 'css/auth.css' %}">
</head>
<body>
    <div class="particles" id="particles"></div>

    <div class="auth-container" id="authContainer">
        <div class="auth-header">
    <button class="back-btn" onclick="goBack()">
        <i class="fas fa-arrow-left"></i>
        <span>Back</span>
    </button>
    
    <div class="logo-container">
                <div class="logo-icon">
                    <i class="fas fa-cube"></i>
                </div>
                <div class="logo-text">
                    <h1>ELMC 3D</h1>
                    <p>3D Export from OSM → GLB</p>
                </div>
            </div>

            <div class="auth-tabs">
                <button class="tab-btn active" id="loginTabBtn" onclick="showLogin()">
                    <i class="fas fa-sign-in-alt"></i>
                    <span>Login</span>
                </button>
                <button class="tab-btn" id="registerTabBtn" onclick="showRegister()">
                    <i class="fas fa-user-plus"></i>
                    <span>Register</span>
                </button>
            </div>
        </div>

        <div class="forms-container">
            <form class="form" id="loginForm">
                <div class="message" id="loginMessage"></div>
                
                <div class="loading" id="loginLoading">
                    <div class="spinner"></div>
                </div>

                <div class="form-content">
                    <div class="form-side">
                        <div class="form-group">
                            <label for="loginEmail"><i class="fas fa-envelope"></i> Email</label>
                            <div class="input-with-icon">
                                <i class="fas fa-user"></i>
                                <input type="email" id="loginEmail" placeholder="your.email@example.com" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="loginPassword"><i class="fas fa-lock"></i> Password</label>
                            <div class="input-with-icon">
                                <i class="fas fa-key"></i>
                                <input type="password" id="loginPassword" placeholder="••••••••" required>
                            </div>
                        </div>

                        <button type="submit" class="btn btn-primary btn-full">
                            <i class="fas fa-sign-in-alt"></i>
                            <span>Login</span>
                        </button>

                        <div class="form-footer">
                            <a href="#"><i class="fas fa-question-circle"></i> Forgot password?</a>
                            <span><i class="fas fa-shield-alt"></i> Secure connection</span>
                        </div>
                    </div>

                    <div class="form-side features">
                        <h3><i class="fas fa-star"></i> Member Benefits</h3>
                        <div class="feature-list">
                            <div class="feature-item">
                                <div class="feature-icon">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                </div>
                                <div class="feature-text">Unlimited cloud storage for 3D projects</div>
                            </div>
                            <div class="feature-item">
                                <div class="feature-icon">
                                    <i class="fas fa-download"></i>
                                </div>
                                <div class="feature-text">Unlimited GLB export without size limits</div>
                            </div>
                            <div class="feature-item">
                                <div class="feature-icon">
                                    <i class="fas fa-history"></i>
                                </div>
                                <div class="feature-text">Complete project history</div>
                            </div>
                            <div class="feature-item">
                                <div class="feature-icon">
                                    <i class="fas fa-bolt"></i>
                                </div>
                                <div class="feature-text">Faster OSM data processing</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="switch-text">
                    Don't have an account? <a onclick="showRegister()">
                        <i class="fas fa-user-plus"></i>
                        <span>Register now</span>
                    </a>
                </div>
            </form>

            <form class="form hidden" id="registerForm">
                <div class="message" id="registerMessage"></div>
                
                <div class="loading" id="registerLoading">
                    <div class="spinner"></div>
                </div>

                <div class="form-content">
                    <div class="form-side">
                        <div class="form-group">
                            <label for="registerUsername"><i class="fas fa-user-tag"></i> Username</label>
                            <div class="input-with-icon">
                                <i class="fas fa-user-circle"></i>
                                <input type="text" id="registerUsername" placeholder="username" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="registerEmail"><i class="fas fa-envelope"></i> Email</label>
                            <div class="input-with-icon">
                                <i class="fas fa-at"></i>
                                <input type="email" id="registerEmail" placeholder="your.email@example.com" required>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="registerPassword"><i class="fas fa-lock"></i> Password</label>
                            <div class="input-with-icon">
                                <i class="fas fa-key"></i>
                                <input type="password" id="registerPassword" placeholder="••••••••" required oninput="checkPasswordStrength(this.value)">
                            </div>
                            <div class="password-strength">
                                <div class="strength-meter" id="passwordStrength"></div>
                            </div>
                        </div>

                        <div class="terms-checkbox">
                            <input type="checkbox" id="agreeTerms" required>
                            <label for="agreeTerms">
                                I agree to the <a href="#">Terms and Conditions</a> and 
                                <a href="#">Privacy Policy</a>
                            </label>
                        </div>

                        <button type="submit" class="btn btn-primary btn-full" id="registerSubmitBtn">
                            <i class="fas fa-user-plus"></i>
                            <span>Create Account</span>
                        </button>
                    </div>

                    <div class="form-side features">
                        <h3><i class="fas fa-rocket"></i> Start with an advantage</h3>
                        <div class="feature-list">
                            <div class="feature-item">
                                <div class="feature-icon">
                                    <i class="fas fa-gift"></i>
                                </div>
                                <div class="feature-text">Get 5 FREE credits for premium exports</div>
                            </div>
                            <div class="feature-item">
                                <div class="feature-icon">
                                    <i class="fas fa-users"></i>
                                </div>
                                <div class="feature-text">Access to the 3D designers community</div>
                            </div>
                            <div class="feature-item">
                                <div class="feature-icon">
                                    <i class="fas fa-bell"></i>
                                </div>
                                <div class="feature-text">Notifications for new features</div>
                            </div>
                            <div class="feature-item">
                                <div class="feature-icon">
                                    <i class="fas fa-trophy"></i>
                                </div>
                                <div class="feature-text">Earn badges as you explore the platform</div>
                            </div>
                        </div>
                        <div style="margin-top: 20px; padding: 12px; background: rgba(102, 126, 234, 0.1); border-radius: 8px;">
                            <p style="color: #cbd5e1; font-size: 12px; line-height: 1.5;">
                                <i class="fas fa-info-circle" style="color: #667eea;"></i>
                                <strong>Guaranteed security:</strong> All data is encrypted and protected according to GDPR.
                            </p>
                        </div>
                    </div>
                </div>

                <div class="switch-text">
                    Already have an account? <a onclick="showLogin()">
                        <i class="fas fa-sign-in-alt"></i>
                        <span>Login here</span>
                    </a>
                </div>
            </form>
        </div>
    </div>
<script>
if ('serviceWorker' in navigator) {
    window.addEventListener('load', function() {
        navigator.serviceWorker.register('/sw.js')
            .then(function(registration) {
            })
            .catch(function(err) {
                console.log('ServiceWorker registration failed: ', err);
            });
    });
}
</script>
<script src="{% static 'js/auth.js' %}"></script>
</body>
</html>